{"ast":null,"code":"import React, { useEffect, useState } from 'react';\nimport { compareValues } from './utils';\nimport { createDeckAndDraw, drawCardFromDeck } from './api';\nexport const useBoardGame = () => {\n  //states\n  const [{\n    cardImageUrl,\n    cardInHand\n  }, setCardState] = useState({\n    cardInHand: null,\n    cardImageUrl: null\n  });\n  const [deckId, setDeckId] = useState(null);\n  const [result, setResult] = useState(null);\n  const [score, setScore] = useState(1); //use effect sychonrous to prevent race conditions\n\n  useEffect(() => {\n    const fetchCardandDeck = async () => {\n      const {\n        deckId,\n        cardsArray\n      } = await createDeckAndDraw();\n      console.log({\n        deckId,\n        cardsArray\n      }); //convert object to array of values\n\n      const cards = cardsArray.map(obj => {\n        return obj.value;\n      }); //convert object to array of images\n\n      const images = cardsArray.map(obj => {\n        return obj.image;\n      });\n      setCardState({\n        cardInHand: cards,\n        cardImageUrl: images\n      });\n      setDeckId(deckId);\n    };\n\n    fetchCardandDeck();\n  }, []);\n\n  const onButtonClick = async event => {\n    const bet = event.target.name;\n    const {\n      value,\n      image\n    } = await drawCardFromDeck(deckId);\n    const result = compareValues({\n      previousCardValue: cardValue,\n      currentCardValue: value,\n      bet\n    });\n    setCardState({\n      cardImageUrl: image,\n      cardValue: value\n    });\n    setResult(result);\n  };\n\n  const onCardClick = event => {\n    let srcImgCard = event.target.src;\n    console.log(cardInHand);\n  };\n\n  return {\n    score,\n    cardImageUrl,\n    onButtonClick,\n    onCardClick,\n    result\n  };\n};","map":{"version":3,"sources":["/Users/eddiezheng/Documents/GitHub/99/card/cardgame/src/cardGameBoard.state.js"],"names":["React","useEffect","useState","compareValues","createDeckAndDraw","drawCardFromDeck","useBoardGame","cardImageUrl","cardInHand","setCardState","deckId","setDeckId","result","setResult","score","setScore","fetchCardandDeck","cardsArray","console","log","cards","map","obj","value","images","image","onButtonClick","event","bet","target","name","previousCardValue","cardValue","currentCardValue","onCardClick","srcImgCard","src"],"mappings":"AAAA,OAAOA,KAAP,IAAeC,SAAf,EAAyBC,QAAzB,QAAwC,OAAxC;AACA,SAASC,aAAT,QAA8B,SAA9B;AACA,SAAQC,iBAAR,EAA2BC,gBAA3B,QAAkD,OAAlD;AAEA,OAAO,MAAMC,YAAY,GAAG,MAAM;AAE9B;AACA,QAAM,CAAC;AAACC,IAAAA,YAAD;AAAcC,IAAAA;AAAd,GAAD,EAA4BC,YAA5B,IAA4CP,QAAQ,CAAC;AACvDM,IAAAA,UAAU,EAAC,IAD4C;AAEvDD,IAAAA,YAAY,EAAC;AAF0C,GAAD,CAA1D;AAIA,QAAM,CAACG,MAAD,EAASC,SAAT,IAAoBT,QAAQ,CAAC,IAAD,CAAlC;AACA,QAAM,CAACU,MAAD,EAAQC,SAAR,IAAmBX,QAAQ,CAAC,IAAD,CAAjC;AACA,QAAM,CAACY,KAAD,EAAOC,QAAP,IAAiBb,QAAQ,CAAC,CAAD,CAA/B,CAT8B,CAW9B;;AACAD,EAAAA,SAAS,CAAC,MAAI;AACV,UAAMe,gBAAgB,GAAG,YAAW;AAChC,YAAM;AAACN,QAAAA,MAAD;AAAQO,QAAAA;AAAR,UAAsB,MAAMb,iBAAiB,EAAnD;AACAc,MAAAA,OAAO,CAACC,GAAR,CAAY;AAACT,QAAAA,MAAD;AAAQO,QAAAA;AAAR,OAAZ,EAFgC,CAIhC;;AACC,YAAMG,KAAK,GAAGH,UAAU,CAACI,GAAX,CAAeC,GAAG,IAAI;AAChC,eAAOA,GAAG,CAACC,KAAX;AACH,OAFa,CAAd,CAL+B,CAS/B;;AACA,YAAMC,MAAM,GAAGP,UAAU,CAACI,GAAX,CAAeC,GAAG,IAAI;AAClC,eAAOA,GAAG,CAACG,KAAX;AACH,OAFe,CAAf;AAIDhB,MAAAA,YAAY,CAAC;AACTD,QAAAA,UAAU,EAACY,KADF;AAETb,QAAAA,YAAY,EAACiB;AAFJ,OAAD,CAAZ;AAIAb,MAAAA,SAAS,CAACD,MAAD,CAAT;AACH,KAnBD;;AAoBAM,IAAAA,gBAAgB;AACnB,GAtBQ,EAsBP,EAtBO,CAAT;;AAwBA,QAAMU,aAAa,GAAG,MAAOC,KAAP,IAAgB;AAClC,UAAMC,GAAG,GAACD,KAAK,CAACE,MAAN,CAAaC,IAAvB;AACA,UAAM;AAACP,MAAAA,KAAD;AAAOE,MAAAA;AAAP,QAAgB,MAAMpB,gBAAgB,CAACK,MAAD,CAA5C;AAGA,UAAME,MAAM,GAAGT,aAAa,CAAC;AACzB4B,MAAAA,iBAAiB,EAAEC,SADM;AAEzBC,MAAAA,gBAAgB,EAAEV,KAFO;AAGzBK,MAAAA;AAHyB,KAAD,CAA5B;AAMAnB,IAAAA,YAAY,CAAC;AACTF,MAAAA,YAAY,EAACkB,KADJ;AAETO,MAAAA,SAAS,EAACT;AAFD,KAAD,CAAZ;AAKAV,IAAAA,SAAS,CAACD,MAAD,CAAT;AACH,GAjBD;;AAmBA,QAAMsB,WAAW,GAAIP,KAAD,IAAW;AAC3B,QAAIQ,UAAU,GAAGR,KAAK,CAACE,MAAN,CAAaO,GAA9B;AACAlB,IAAAA,OAAO,CAACC,GAAR,CAAYX,UAAZ;AACH,GAHD;;AAKA,SAAO;AACHM,IAAAA,KADG;AAEHP,IAAAA,YAFG;AAGHmB,IAAAA,aAHG;AAIHQ,IAAAA,WAJG;AAKHtB,IAAAA;AALG,GAAP;AAOH,CAnEM","sourcesContent":["import React, {useEffect,useState} from 'react'\nimport { compareValues } from './utils'\nimport {createDeckAndDraw, drawCardFromDeck} from './api'\n\nexport const useBoardGame = () => {\n\n    //states\n    const [{cardImageUrl,cardInHand}, setCardState] = useState({\n        cardInHand:null,\n        cardImageUrl:null\n    })\n    const [deckId, setDeckId]=useState(null)\n    const [result,setResult]=useState(null)\n    const [score,setScore]=useState(1)\n\n    //use effect sychonrous to prevent race conditions\n    useEffect(()=>{\n        const fetchCardandDeck = async () =>{\n            const {deckId,cardsArray} = await createDeckAndDraw();\n            console.log({deckId,cardsArray})\n\n            //convert object to array of values\n             const cards = cardsArray.map(obj => {\n                 return obj.value\n             })\n\n             //convert object to array of images\n             const images = cardsArray.map(obj => {\n                return obj.image\n            })\n            \n            setCardState({\n                cardInHand:cards,\n                cardImageUrl:images\n            })\n            setDeckId(deckId);\n        }\n        fetchCardandDeck();\n    },[])\n\n    const onButtonClick = async (event) =>{\n        const bet=event.target.name\n        const {value,image} = await drawCardFromDeck(deckId);\n    \n        \n        const result = compareValues({\n            previousCardValue: cardValue,\n            currentCardValue: value,\n            bet\n        })\n \n        setCardState({\n            cardImageUrl:image,\n            cardValue:value\n        })\n        \n        setResult(result)\n    }\n\n    const onCardClick = (event) => {\n        let srcImgCard = event.target.src\n        console.log(cardInHand)\n    }\n\n    return {\n        score,\n        cardImageUrl,\n        onButtonClick,\n        onCardClick,\n        result\n    }\n}"]},"metadata":{},"sourceType":"module"}